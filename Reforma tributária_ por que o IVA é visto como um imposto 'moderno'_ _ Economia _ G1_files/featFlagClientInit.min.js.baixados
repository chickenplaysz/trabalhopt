(()=>{"use strict";var e="enabled",t="disabled",n=[{name:"banner_materia1",abbr:"materia1"}],i="ff-alt-",a="ff-testid-",o=function(e,t,n){var i;void 0===n&&(n=null);var a=encodeURIComponent(e)+"="+t+"; max-age="+(null!=(i=n)?i:5184e3)+"; path=/;";return document.cookie=a,a},r=e=>{var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0};function s(e,t,n,i,a,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}var d=e=>()=>{var t,n=new Function("return "+e);try{t=n()}catch(e){console.error(e)}return t},c=function(e,t){void 0===t&&(t=1),e.activationConfig.hasLazyEnable=!1,e.activationConfig.enableType="cma",e.abConfig=void 0,e.enabled=t>0,e.stateIndex=t},u=(e,t)=>{var n;return(null==e||null==(n=e.activationConfig)?void 0:n.enableType)===t},g=(e,t)=>u(e,"globoab")&&e.abConfig&&(!t||t===e.abConfig.experimentName),v=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=void 0),e.filter((e=>!e.disabled&&g(e,t)))},f=function(e){var t;return void 0===e&&(e={}),null==(t=e.activationConfig)?void 0:t.cookieName},p=function(e){var t;return void 0===e&&(e={}),!(null==(t=e.activationConfig)||!t.hasLazyEnable)},b=n=>{!n.state.applied&&n.state.resolved&&((n=>{var i=(n=>{var i=function(e){var t;return void 0===e&&(e={}),null==(t=e.activationConfig)?void 0:t.classFFBase}(n),a=[],o=[];i&&(a.push(i+"--"+(n.enabled?e:t)),o.push(i+"--"+(n.enabled?t:e)),a.push(i+"--st-"+n.stateIndex));var r=(e=>e.states.find((t=>t.si===e.stateIndex)))(n),s=(e=>e.states.filter((t=>t.si!==e.stateIndex)))(n);if(r.classes&&a.push(...r.classes),s&&(i&&s.forEach((e=>o.push(i+"--st-"+e.si))),r.isRemClasses)){var l=[...new Set(s.reduce(((e,t)=>[...e,...t.classes||[]]),[]))];l&&o.push(...l)}return{classesToAdd:a,classesToRem:o}})(n);i.classesToRem&&i.classesToRem.forEach((e=>{return t=e,document.documentElement.classList.remove(t);var t})),i.classesToAdd&&i.classesToAdd.forEach((e=>{return t=e,document.documentElement.classList.add(t);var t}))})(n),n.state.applied=!0,n.promiseConfig.resolve(n.stateIndex))},h=function(e,t){var n,{isPreview:i=!1,dependsOnList:a=[]}=void 0===t?{}:t;return e&&e.name&&((n=l({},e)).state={},n.promiseConfig={},n.promiseConfig.promise=new Promise(((e,t)=>{n.promiseConfig.resolve=e,n.promiseConfig.reject=t})),n.actions={},n.actions.hasContent=()=>!0,n.actions.hasFeatFlagCondition=()=>!0,n.contentCondition&&(n.actions.hasContent=d(n.contentCondition)),n.ffCondition&&(n.actions.hasFeatFlagCondition=d(n.ffCondition)),n.activationConfig.initCondition&&(n.actions.checkOnInit=d(n.activationConfig.initCondition)),!n.actions.hasFeatFlagCondition()||function(e){return void 0===e&&(e=[]),e.length&&!e.find((e=>!e.disabled))}(a)?(n.disabled=!0,c(n,0)):i&&c(n,1),(e=>{var t,n=void 0===e.stateIndex?0:e.stateIndex;if(e.disabled)return n;if(function(e){return void 0===e&&(e={}),f(e)&&(g(e)||u(e,"runtime"))}(e)){var i=r(f(e));void 0!==i&&(n="true"===i||"false"===i?"true"===i?1:0:Number(i)),e.enabled=n>0,e.stateIndex=n,e.state.resolved=!0}else g(e)&&!u(e,"cma")||(e.state.resolved=!0);if(null!=(t=e.actions)&&t.checkOnInit){var a,o=null==(a=e.actions)?void 0:a.checkOnInit();e.enabled=o>0,e.stateIndex=o>=0?o:0,e.state.resolved=!0}b(e)})(n)),n},C=(e,t,n)=>{var i=!1;return function(e){void 0===e&&(e={});var t=(e.abConfig||{}).experimentAppliedInfo||{};return t&&t.experiment&&t.alternative&&t.testId}(t)&&!1!==t.abConfig.events&&n&&n[e]&&(n[e](t.abConfig.experimentAppliedInfo),i=!0),i},F=(e,t,n)=>{if(e&&t){var s=e.experiment,l=v(t,s),d=(e=>({alternative:r(""+i+e),testId:r(""+a+e)}))(s);l.forEach((t=>{t.experiment=e;var s=((e,t)=>e.states.find((e=>e.ab===t)))(t,e.alternative),l=s.si,c=p(t);t.isFirstFeatFlagView=function(e){void 0===e&&(e={});var{hasLazyEnable:t,cookieName:n}=e.activationConfig||{};return t&&!r(n)}(t);var u,g,v,h=(void 0===(g=l)&&(g=0),void 0===v&&(v=!1),(u=t).disabled||(u.stateIndex===g&&u.state.applied&&!v||p(u)&&!v||(u.enabled=!!g,u.stateIndex=g,u.state.resolved=!0,b(u)),((e,t)=>{var n=f(e);if(!function(e){var t;return void 0===e&&(e={}),!(null==(t=e.activationConfig)||!t.isReadOnly)}(e)){if(e.experiment){var{experiment:r,alternative:s,testId:l}=e.experiment;((e,t,n)=>{var r=""+a+e;o(""+i+e,t),o(r,n)})(r,s,l)}n&&o(n,t)}})(u,g)),u.stateIndex);if(t.abConfig.experimentAppliedInfo={experiment:e.experiment,alternative:t.states.find((e=>e.si===h)).ab,testId:c?d.testId:e.testId},t.abConfig.isImpressionFired=!1,!t.isFirstFeatFlagView&&n&&!1!==t.abConfig.events){var F=((e,t)=>C("impression",e,t))(t,n);t.abConfig.isImpressionFired=F,t.abConfig.sendConversion=()=>{var e=((e,t)=>C("conversion",e,t))(t,n);t.abConfig.isConversionFired=e},t.abConfig.conversionNeeded&&t.abConfig.sendConversion()}}))}},m=function(){var e,t=(e=function*(e,t,n){var i;try{i=yield n.choose(e),F(i,t,n)}catch(n){console.error(n),v(t,e).forEach((e=>{e.hasExperimentError=!0}))}return i},function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){s(o,i,a,r,l,"next",e)}function l(e){s(o,i,a,r,l,"throw",e)}r(void 0)}))});return function(e,n,i){return t.apply(this,arguments)}}();function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x.apply(this,arguments)}const I=class{constructor(e,t){var n=this,{isPreview:i=!1}=void 0===e?{}:e;void 0===t&&(t=void 0),this.getFFConfig=e=>this.featureFlagList.find((t=>t.name===e)),this.addFeatureFlagsConfig=function(e){void 0===e&&(e=[]);var t=[];e.forEach((e=>{n.getFFConfig(e.name)||(e.dependsOn&&e.dependsOn.length?t.push(e):n.featureFlagList.push(h(e,n.options)))})),t.forEach((e=>{var t=e.dependsOn.map((e=>n.getFFConfig(e)));n.featureFlagList.push(h(e,x({},n.options,{dependsOnList:t})))}))},this.featureFlagList=[],this.started=!1,this.options={isPreview:i},t&&(this.featureFlagList=t.featureFlagList,this.options=x({},this.options,t.options),this.started=t.started)}getFeatureFlag(e){var t=this.getFFConfig(e);return t?t.promiseConfig.promise:Promise.reject(new Error("notFound"))}init(e){void 0===e&&(e={}),this.addFeatureFlagsConfig(e.features),this.started=!0,this.setupAdMetadataForPageTracking(),document.dispatchEvent(new CustomEvent("glb.featureFlag.init"))}getAdCustomAttrs(e){return function(e,t){var i;return void 0===t&&(t=[]),t.forEach((t=>{var{adPositions:a,adCustomAttrPrefix:o}=t.trackingConfig||{};if((a||[]).includes(e)&&t.state.resolved){var r=t.actions.hasContent(),s=(e=>{var t=n.find((t=>t.name===e));return t?t.abbr:e})(e),l="c"+(r?"1":"0")+"_f"+t.stateIndex+"_"+s;i||(i={}),i[o]=l}})),i}(e,this.featureFlagList)}convertAbFlag(e){var t=this.getFFConfig(e);t&&t.abConfig&&(t.abConfig.sendConversion?t.abConfig.sendConversion():t.abConfig.conversionNeeded=!0)}getFeatureFlagForAdPageTracking(){return this.featureFlagList.filter((e=>{var t,n;return(null==e||null==(t=e.trackingConfig)?void 0:t.hasTrackingForPage)&&!(null!=e&&null!=(n=e.trackingConfig)&&n.disabled)}))}setupAdMetadataForPageTracking(){var e=this.getFeatureFlagForAdPageTracking();if(globalThis.cdaaas&&e[0]){var t=e[0].stateIndex;globalThis.cdaaas.AD_AB_TESTS={enabled:"control"!==e[0].states[t].ab,experiment:e[0].stateIndex}}}};function A(e,t,n,i,a,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(i,a)}function y(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function r(e){A(o,i,a,r,s,"next",e)}function s(e){A(o,i,a,r,s,"throw",e)}r(void 0)}))}}globalThis.GloboFeatureFlagClient=class extends I{constructor(e,t){var{env:n="prod",useGWD:i=!0,isPreview:a=!1,globoABClient:o}=void 0===e?{}:e;void 0===t&&(t=void 0),super({isPreview:a},t),this.options.env=n,this.options.useGWD=i,this.logs=[],this.globoABClient=o||this.globoABClient}cLog(e){this.logs.push(e)}getGloboAbClient(){var e=this;return y((function*(){if(e.globoABClient)return e.globoABClient;try{e.options.useGWD&&(yield globalWebdeps("globo-ab")),e.globoABClient=new GloboAB(e.options.env),e.globoABClient.options().skipImpression().timeout(4e3)}catch(e){console.error(e)}return e.globoABClient}))()}updateFlagsGloboAB(){var e=this;return y((function*(){var t=v(e.featureFlagList);if(t.length){try{if(!(yield e.getGloboAbClient()))return}catch(t){console.error(t),e.cLog(t)}try{var n=function(e){void 0===e&&(e=[]);var t=e.map((e=>e.abConfig?e.abConfig.experimentName:null)).filter((e=>!!e));return[...new Set(t)]}(t),i=[];n.forEach((n=>{i.push(m(n,t,e.globoABClient))})),yield Promise.all(i)}catch(t){console.error(t),e.cLog(t)}}}))()}updateFlags(){var e=this;return y((function*(){e.started?(yield e.updateFlagsGloboAB(),document.dispatchEvent(new CustomEvent("glb.featureFlag.updateFlags"))):e.cLog("[updateFlags] fail: client not started")}))()}};var T=!!globalThis.glbFeatFlagClient;globalThis.glbFeatFlagClient=new globalThis.GloboFeatureFlagClient(globalThis.glbFeatFlagConfig,globalThis.glbFeatFlagClient),!T&&globalThis.glbFeatFlagConfig&&globalThis.glbFeatFlagClient.init(globalThis.glbFeatFlagConfig),globalThis.glbFeatFlagClient.updateFlags()})();